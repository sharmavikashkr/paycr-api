<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>PayCr</title>
    <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/vendor/metisMenu/metisMenu.min.css" rel="stylesheet">
    <link href="/dist/css/sb-admin-2.css" rel="stylesheet">
    <link href="/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <script src="/vendor/jquery/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-cookies.js"></script>
	<script src="/angular/adminctrl.js"></script>
</head>
<body ng-app="payCrAdminApp" ng-controller="AdminController" ng-cloak>
    <div id="wrapper">
    	<div ng-class="(server.isSuccess)?'alert-success':'alert-danger'" ng-hide="server.hideMessage" id="serverRespAlert" class="alert alert-dismissible">
		    <a href="#" ng-click="dismissServerAlert()" class="close" aria-label="close">&times;</a>
		    <div class="text-center">
		    	<strong>{{server.respStatus}}</strong>&nbsp;<span>{{server.respMsg}}</span>
		    </div>
		</div>
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <strong><a class="navbar-brand" href="/admin">PayCr</a></strong>
            </div>
            <ul class="nav navbar-top-links navbar-right">
            	<li>
            		<div><strong>${user.name}</strong></div>
            	</li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-bell fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul ng-init="fetchNotifications()" class="dropdown-menu dropdown-alerts">
                        <li ng-repeat="notice in notices">
                            <a href="#">
                                <div>
                                    <i class="fa fa-comment fa-fw"></i> {{notice.subject}}
                                    <span class="pull-right text-muted small">{{notice.createdStr}}</span>
                                </div>
                                <hr style="margin:0px;">
                                <div>
                                	<p>{{notice.message}}</p>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                        	<a href="#">View all..</a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a></li>
                        <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a></li>
                        <li class="divider"></li>
                        <li><a href="/logout"><i class="fa fa-sign-out fa-fw"></i> Logout</a></li>
                    </ul>
                </li>
            </ul>
            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        <li>
                            <a href="#" data-target="#merchantsTab" data-toggle="tab"><i class="fa fa-dashboard fa-fw"></i> Merchants</a>
                        </li>
                        <li>
                            <a href="#" data-target="#pricingTab" data-toggle="tab"><i class="fa fa-rupee fa-fw"></i> Pricing</a>
                        </li>
                        <li>
                            <a href="#" data-target="#reportsTab" data-toggle="tab"><i class="fa fa-print fa-fw"></i> Reports</a>
                        </li>
                        <li>
                            <a href="#" data-target="#globalSettingsTab" data-toggle="tab"><i class="fa fa-gears fa-fw"></i> Global Settings</a>
                        </li>
                        <li>
                            <a href="#" data-target="#accountSettingsTab" data-toggle="tab"><i class="fa fa-gear fa-fw"></i> Account Settings</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="tab-content" id="page-wrapper">
            <div id="merchantsTab" class="tab-pane active">
	        	<br>
	            <div class="row">
	                <div class="col-lg-2" style="float:right;">
	                    <div class="row">
	                    	<button type="button" class="btn btn-info btn-circle btn-lg" data-toggle="modal" data-target="#createMerchant"><i class="fa fa-plus"></i></button>
	                    </div>
	                </div>
	            </div>
	            <br>
	            <div class="row">
	                <div class="col-lg-12">
	                    <div class="panel">
	                        <div class="panel-body col-lg-3">
	                        	<table style="width: 100%; border-collapse:collapse;" class="table table-striped table-bordered table-hover">
	                        		<tbody>
	                        			<tr>
	                        				<td>
	                        					<div class="form-group">
	                        					<label class="control-label">Created</label>
	                        					<input class="form-control" ng-model="searchMerchantReq.createdFrom" placeholder="Created From"/>
	                        					<span>&nbsp;&nbsp;and</span>
	                        					<input class="form-control" ng-model="searchMerchantReq.createdTo" placeholder="Created To"/>
	                        					</div>
	                        				</td>
	                        			</tr>
	                        			<tr>
	                        				<td>
	                        					<div class="form-group">
	                        					<label class="control-label">Name</label>
	                        					<input class="form-control" ng-model="searchMerchantReq.name" placeholder="Merchant Name"/>
	                        					</div>
	                        				</td>
	                        			</tr>
	                        			<tr>
	                        				<td>
	                        					<div class="form-group">
	                        					<label class="control-label">Email</label>
	                        					<input class="form-control" ng-model="searchMerchantReq.email" placeholder="Merchant Email"/>
	                        					</div>
	                        				</td>
	                        			</tr>
	                        			<tr>
	                        				<td>
	                        					<div class="form-group">
	                        					<label class="control-label">Mobile</label>
	                        					<input class="form-control" ng-model="searchMerchantReq.mobile" placeholder="Merchant Mobile"/>
	                        					</div>
	                        				</td>
	                        			</tr>
	                        			<tr>
	                        				<td><button ng-click="searchMerchant()" type="button" class="btn btn-info">Search</button></td>
	                        			</tr>
	                        		</tbody>
	                        	</table>
	                        </div>
	                        <div ng-init="searchMerchant()" class="panel-body col-lg-9">
	                            <table style="width:100%; border-collapse:collapse;" class="table table-striped table-bordered table-hover">
	                                <thead>
	                                    <tr>
	                                        <th>Name</th>
	                                        <th>Email</th>
	                                        <th>Mobile</th>
	                                        <th>Access Key</th>
	                                        <th>Active</th>
	                                    </tr>
	                                </thead>
	                                <tbody>
	                                    <tr ng-class="(merchant.active)?'success':'warning'" ng-repeat="merchant in merchants">
	                                        <td>{{merchant.name}}</td>
	                                        <td>{{merchant.email}}</td>
	                                        <td>{{merchant.mobile}}</td>
	                                        <td>{{merchant.accessKey}}</td>
	                                        <td>{{merchant.active}}</td>
	                                    </tr>
	                                </tbody>
	                            </table>
	                        </div>
	                    </div>
	                </div>
	            </div>
        </div>
        <div ng-init="fetchPricings()" id="pricingTab" class="tab-pane fade">
	        	<br>
	            <div class="row">
	                <div class="col-lg-2" style="float:right;">
	                    <div class="row">
	                    	<button type="button" class="btn btn-info btn-circle btn-lg" data-toggle="modal" data-target="#createPricing"><i class="fa fa-plus"></i></button>
	                    </div>
	                </div>
	            </div>
	            <br>
	            <div class="row">
	                <div class="col-lg-12">
	                    <div class="panel">
	                        <div class="panel-body col-md-10 col-md-offset-1">
	                            <table style="width:100%; border-collapse:collapse;" class="table table-striped table-bordered table-hover">
	                                <thead>
	                                    <tr>
	                                        <th>Name</th>
	                                        <th>Duration</th>
	                                        <th>Rate</th>
	                                        <th>Invoice Limit</th>
	                                        <th>Start Amount</th>
	                                        <th>End Amount</th>
	                                        <th>Action</th>
	                                    </tr>
	                                </thead>
	                                <tbody>
	                                    <tr ng-class="(pricing.active)?'success':'warning'" ng-repeat="pricing in pricings">
	                                        <td>{{pricing.name}}</td>
	                                        <td>{{pricing.duration}}</td>
	                                        <td>&#8377; {{pricing.rate}}</td>
	                                        <td>{{pricing.invoiceLimit}}</td>
	                                        <td>&#8377; {{pricing.startAmount}}</td>
	                                        <td>&#8377; {{pricing.endAmount}}</td>
	                                        <td ng-if="pricing.active"><button ng-click="togglePricing(pricing.id)" type="button" class="btn btn-danger btn-xs">Deactivate</button></td>
	                                        <td ng-if="!pricing.active"><button ng-click="togglePricing(pricing.id)" type="button" class="btn btn-success btn-xs">Activate</button></td>
	                                    </tr>
 	                                </tbody>
	                            </table>
	                        </div>
	                    </div>
	                </div>
	            </div>
        </div>
        <div ng-init="fetchSubsSettings()" id="globalSettingsTab" class="tab-pane fade">
	        <br>
	        <div class="row">
        		<div class="col-xs-12 col-md-12 col-lg-8">
                    <div class="panel panel-default">
                        <div class="panel-heading">Subscription Settings<span style="float:right;margin-top:-5px;"><button type="button" class="btn btn-info btn-circle btn-md" data-toggle="modal" data-target="#addSubscriptionSetting"><i class="fa fa-plus"></i></button></span></div>
                        <div class="panel-body">
                        	<table style="width:100%; border-collapse:collapse; font-size:14px;" class="table table-striped table-bordered table-hover">
                                <thead>
                                    <tr>
                                        <th>Razorpay Merchant Id</th>
                                        <th>Razorpay Key Id</th>
                                        <th>Razorpay Secret Id</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                	<tr ng-class="(subsSetting.active)?'success':'warning'" ng-repeat="subsSetting in subsSettings">
                                        <td>{{subsSetting.rzpMerchantId}}</td>
                                        <td>{{subsSetting.rzpKeyId}}</td>
                                        <td>{{subsSetting.rzpSecretId}}</td>
                                        <td><button ng-if="!subsSetting.active" ng-click="toggleSubsSetting(subsSetting.id)" type="button" class="btn btn-success btn-xs"><i class="fa fa-check"></i></button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
        	</div>
	    </div>
    </div>
    <div id="createMerchant" class="modal fade" role="dialog">
	  <div class="modal-dialog">
	    <div id="newMerchant" class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h4 class="modal-title">Create New Merchant</h4>
	      </div>
	      <div class="modal-body" style="padding:20px;">
	      	<form name="createMerchantForm">
			    <div class="row">
			        <div class="col-md-12">
			            <div class="panel panel-default">
			                <div class="panel-body">
			                    <div class="table-responsive">
			                        <table class="table table-bordered">
			                            <tbody>
			                            	<tr>
		                        				<td>
		                        					<div ng-class="(createMerchantForm.name.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">Name</label>
		                        					<input class="form-control" ng-model="newmerchant.name" name="name" placeholder="Merchant Name" ng-pattern="patterns.namePattern" required/>
		                        					</div>
		                        				</td>
		                        			</tr>
		                        			<tr>
		                        				<td>
		                        					<div ng-class="(createMerchantForm.email.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">Email</label>
		                        					<input class="form-control" ng-model="newmerchant.email" name="email" type="email" placeholder="Merchant Email" ng-pattern="patterns.emailPattern" required/>
		                        					</div>
		                        				</td>
		                        			</tr>
		                        			<tr>
		                        				<td>
		                        					<div ng-class="(createMerchantForm.mobile.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">Mobile</label>
		                        					<input class="form-control" ng-model="newmerchant.mobile" name="mobile" type="number" placeholder="Merchant Mobile" ng-pattern="patterns.mobilePattern" required/>
		                        					</div>
		                        				</td>
		                        			</tr>
		                        			<tr>
		                        				<td>
		                        					<div ng-class="(createMerchantForm.adminName.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">Admin</label>
		                        					<input class="form-control" ng-model="newmerchant.adminName" name="adminName" placeholder="Merchant Admin" ng-pattern="patterns.namePattern" required/>
		                        					</div>
		                        				</td>
		                        			</tr>
		                        			<tr>
		                        				<td>
		                        					<div class="form-group">
		                        					<label class="control-label">Pricing</label>
		                        					<select class="form-control" ng-model="newmerchant.pricingId">
		                        						<option ng-repeat="pricing in pricings" value="{{pricing.id}}">{{pricing.name}}</option>
		                        					</select>
		                        					</div>
		                        				</td>
		                        			</tr>
			                            </tbody>
			                        </table>
			                    </div>
			                </div>
			            </div>
			        </div>
			    </div>
	      	</form>
	      </div>
	      <div class="modal-footer">
	      	<button type="button" class="btn btn-info" ng-click="createMerchant()">Create</button>
	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	      </div>
	    </div>
	  </div>
	</div>
	<div id="createPricing" class="modal fade" role="dialog">
	  <div class="modal-dialog">
	    <div id="newInvoice" class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h4 class="modal-title">Create New Pricing</h4>
	      </div>
	      <div class="modal-body" style="padding:20px;">
	      	<form name="createPricingForm">
			    <div class="row">
			        <div class="col-md-12">
			            <div class="panel panel-default">
			                <div class="panel-body">
			                    <div class="table-responsive">
			                        <table class="table table-bordered">
			                            <tbody>
			                            	<tr>
		                        				<td>
		                        					<div ng-class="(createPricingForm.name.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">Name</label>
		                        					<input class="form-control" ng-model="newpricing.name" name="name" placeholder="Pricing Name" ng-pattern="patterns.namePattern" required/>
		                        					</div>
		                        				</td>
		                        			</tr>
		                        			<tr>
		                        				<td>
		                        					<div ng-class="(createPricingForm.description.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">Description</label>
		                        					<input class="form-control" ng-model="newpricing.description" name="description" placeholder="Pricing Description" ng-pattern="patterns.namePattern" required/>
		                        					</div>
		                        				</td>
		                        			</tr>
		                        			<tr>
		                        				<td>
		                        					<div ng-class="(createPricingForm.invoiceLimit.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">Invoice Limit</label>
		                        					<input class="form-control" ng-model="newpricing.invoiceLimit" type="number" name="invoiceLimit" placeholder="Invoice limit" ng-pattern="patterns.numberPattern" required/>
		                        					</div>
		                        				</td>
		                        			</tr>
		                        			<tr>
		                        				<td>
		                        					<div ng-class="(createPricingForm.startAmount.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">Start Amount</label>
		                        					<div class="input-group">
													    <div class="input-group-addon">
													    	&#8377; 
													    </div>
													    <input class="form-control" ng-model="newpricing.startAmount" name="startAmount" type="number" placeholder="Start Amount" ng-pattern="patterns.amountPattern" required/>
													</div>
		                        					</div>
		                        				</td>
		                        			</tr>
		                        			<tr>
		                        				<td>
		                        					<div ng-class="(createPricingForm.endAmount.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">End Amount</label>
		                        					<div class="input-group">
													    <div class="input-group-addon">
													    	&#8377; 
													    </div>
													    <input class="form-control" ng-model="newpricing.endAmount" name="endAmount" type="number" placeholder="End Amount" ng-pattern="patterns.amountPattern" required/>
													</div>
		                        					</div>
		                        				</td>
		                        			</tr>
		                        			<tr>
		                        				<td>
		                        					<div ng-class="(createPricingForm.duration.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">Duration (Days)</label>
		                        					<input class="form-control" ng-model="newpricing.duration" name="duration" type="number" placeholder="Duration" ng-pattern="patterns.numberPattern" required/>
		                        					</div>
		                        				</td>
		                        			</tr>
		                        			<tr>
		                        				<td>
		                        					<div ng-class="(createPricingForm.rate.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">Rate</label>
		                        					<div class="input-group">
													    <div class="input-group-addon">
													    	&#8377; 
													    </div>
													    <input class="form-control" ng-model="newpricing.rate" name="rate" type="number" placeholder="Rate" ng-pattern="patterns.amountPattern" required/>
													</div>
		                        					</div>
		                        				</td>
		                        			</tr>
			                            </tbody>
			                        </table>
			                    </div>
			                </div>
			            </div>
			        </div>
			    </div>
	      	</form>
	      </div>
	      <div class="modal-footer">
	      	<button type="button" class="btn btn-info" ng-click="createPricing()">Create</button>
	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	      </div>
	    </div>
	  </div>
	</div>
	<div id="addSubscriptionSetting" class="modal fade" role="dialog">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h4 class="modal-title">Add New Subscription Setting</h4>
	      </div>
	      <div class="modal-body" style="padding:20px;">
	      	<form name="createSubsSettingForm">
			    <div class="row">
			        <div class="col-md-12">
			            <div class="panel panel-default">
			                <div class="panel-body">
			                    <div class="table-responsive">
	                            	<div class="form-group">
		                     			<label class="checkbox-inline"><input type="checkbox" ng-model="newsubssetting.active"/>Activate</label>
	                     			</div>
			                        <table class="table table-bordered">
			                            <tbody>
			                            	<tr>
		                        				<td>
		                        					<div ng-class="(createSubsSettingForm.rzpMerchantId.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">Razorpay Merchant Id</label>
		                        					<input class="form-control" ng-model="newsubssetting.rzpMerchantId" name="rzpMerchantId" placeholder="Razorpay Merchant Id" ng-pattern="patterns.namePattern" required/>
		                        					</div>
		                        				</td>
		                        			</tr>
		                        			<tr>
		                        				<td>
		                        					<div ng-class="(createSubsSettingForm.rzpKeyId.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">Razorpay Key Id</label>
		                        					<input class="form-control" ng-model="newsubssetting.rzpKeyId" name="rzpKeyId" placeholder="Razorpay Key Id" ng-pattern="patterns.namePattern" required/>
		                        					</div>
		                        				</td>
		                        			</tr>
		                        			<tr>
		                        				<td>
		                        					<div ng-class="(createSubsSettingForm.rzpSecretId.$valid)?'':'has-error'" class="form-group">
		                        					<label class="control-label">Razorpay Secret Id</label>
		                        					<input class="form-control" ng-model="newsubssetting.rzpSecretId" name="rzpSecretId" placeholder="Razorpay Secret Id" ng-pattern="patterns.namePattern" required/>
		                        					</div>
		                        				</td>
		                        			</tr>
			                            </tbody>
			                        </table>
			                    </div>
			                </div>
			            </div>
			        </div>
			    </div>
	      	</form>
	      </div>
	      <div class="modal-footer">
	      	<button type="button" class="btn btn-info" ng-click="createSubsSetting()">Create</button>
	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	      </div>
	    </div>
	  </div>
	</div>
	</div>
    <script src="/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="/vendor/metisMenu/metisMenu.min.js"></script>
    <script src="/dist/js/sb-admin-2.js"></script>
</body>
</html>
