<div ng-controller="ManageController" ng-init="fetchInventory()">
	<div class="row">
		<div class="col-md-12">
			<div ng-if="user.access.finance" class="panel-body">
				<div class="col-sm-2 col-sm-offset-9">
					<button title="Add Item" type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#createInventoryModal">
						<i class="fa fa-plus"></i> Item
					</button>
				</div>
			</div>
			<br>
			<div class="panel-body">
				<div class="col-md-12">
					<table class="table table-bordered table-responsive">
						<thead>
							<tr>
								<th class="text-center"><strong>Code</strong></th>
								<th class="text-center"><strong>Name</strong></th>
								<th class="text-center"><strong>Rate</strong></th>
								<th class="text-center hidden-xs"><strong>Created By</strong></th>
								<th class="text-center hidden-xs"><strong>Created</strong></th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><input type="text" class="form-control" ng-model="invquery.code" placeholder="search code"></input></td>
								<td><input type="text" class="form-control" ng-model="invquery.name" placeholder="search name"></input></td>
								<td><input type="text" class="form-control" ng-model="invquery.rate" placeholder="search rate"></input></td>
								<td class="hidden-xs"><input type="text" class="form-control" ng-model="invquery.createdBy" placeholder="search created by"></input></td>
								<td class="hidden-xs"></td>
							</tr>
						</tbody>
						<tbody ng-repeat="inventory in inventoryList | filter : invquery">
							<tr
								data-toggle="collapse"
								data-target="#itemdetails-{{inventory.id}}"
								class="accordion-toggle">
								<td class="text-center">{{inventory.code}}</td>
								<td class="text-center">{{inventory.name}}</td>
								<td class="text-center"><i class="fa fa-rupee"></i> {{inventory.rate}}</td>
								<td class="text-center hidden-xs">{{inventory.createdBy}}</td>
								<td class="text-center hidden-xs">{{inventory.created | date:'dd-MM-yyyy'}}</td>
							</tr>
							<tr>
								<td colspan="12" style="padding: 0px; border: 0px;">
									<div style="padding:10px;" class="accordion-body collapse" id="itemdetails-{{inventory.id}}">
										<div class="row">
											<div class="col-md-12">
												<button title="Add Invoice" type="button"
													class="btn btn-info btn-md hidden-xs"
													ng-click="updateInvoiceItem(inventory)"
													data-toggle="modal"
													data-target="#createInvoiceModal">
													<i class="fa fa-plus"></i>
												</button>
												<button title="Add Invoice" type="button"
													class="btn btn-info btn-md visible-xs-inline"
													ng-click="updateInvoiceItem(inventory)"
													data-toggle="modal"
													data-target="#createInvoiceXsModal">
													<i class="fa fa-plus"></i>
												</button>
												<button title="Search Invoice" type="button"
													class="btn btn-success btn-md"
													ng-click="seachItemInvoice(inventory.code)"
													data-target="#invoiceTab"
													data-toggle="tab">
													<i class="fa fa-search"></i>
												</button>
												<a title="Edit Consumer" href="#" ng-click="$parent.editConPrefs = !$parent.editConPrefs" ng-if="user.access.finance">
													<span class="btn btn-danger glyphicon glyphicon-edit"></span>
												</a>
											</div>
										</div>
										<br>
										<div class="row">
											<div class="col-lg-6">
												<h5>Item Settings</h5>
												<fieldset ng-disabled="!editConPrefs">
													<table class="table table-striped table-bordered table-responsive">
														<tbody>
															<tr>
																<td><strong>Description</strong></td>
																<td><input class="form-control" ng-model="inventory.description"/></td>
															</tr>
														</tbody>
													</table>
												</fieldset>
												<button type="button" ng-click="updateItem(inventory)" class="btn btn-info">Save</button>
											</div>
										</div>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>